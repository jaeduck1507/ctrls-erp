<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.erp.qam.mapper.ProductNameMapper">
    <!-- âœ… product_name í…Œì´ë¸” ì¡°íšŒ ê²°ê³¼ë¥¼ ProductName ê°ì²´ë¡œ ë§¤í•‘ -->
    <resultMap id="ProductNameMap" type="ProductName">
        <id column="product_code" property="productCode"/>             <!-- PK -->
        <result column="product_color" property="productColor"/>       <!-- ìƒ‰ìƒ -->
        <result column="product_name" property="productName"/>         <!-- ì´ë¦„ -->
        <result column="product_price" property="productPrice"/>       <!-- íŒë§¤ê°€ -->
        <result column="product_cost" property="productCost"/>         <!-- ë‹¨ê°€ -->
        <result column="product_category" property="productCategory"/> <!-- ì¹´í…Œê³ ë¦¬ -->
    </resultMap>

    <!-- âœ… ì „ì²´ ì œí’ˆëª… ëª©ë¡ ì¡°íšŒ -->
    <select id="showProductName" resultMap="ProductNameMap">
        SELECT * FROM product_name
    </select>

    <!-- âœ… ì œí’ˆëª… ë“±ë¡ -->
    <insert id="insertProductName" parameterType="ProductName">
        INSERT INTO product_name(product_color, product_name, product_price, product_cost, product_category)
        VALUES(#{productColor}, #{productName}, #{productPrice}, #{productCost}, #{productCategory})
    </insert>

    <!-- âœ… ì œí’ˆëª… ìˆ˜ì • -->
    <update id="updateProductName" parameterType="ProductName">
        UPDATE product_name
        SET product_color = #{productColor},
            product_name = #{productName},
            product_price = #{productPrice},
            product_cost = #{productCost},
            product_category = #{productCategory}
        WHERE product_code = #{productCode}
    </update>

    <!-- âœ… ì œí’ˆëª… ë‹¨ê±´ ì¡°íšŒ (ìˆ˜ì •í¼ ì§„ìž… ì‹œ ì‚¬ìš©) -->
    <select id="findById" parameterType="int" resultMap="ProductNameMap">
        SELECT * FROM product_name WHERE product_code = #{productCode}
    </select>

    <!-- âœ… ì œí’ˆëª… ì‚­ì œ -->
    <delete id="deleteProductName" parameterType="int">
        DELETE FROM product_name
        WHERE product_code = #{productCode}
    </delete>

    <!-- âœ… ì œí’ˆëª… ê²€ìƒ‰ (ì´ë¦„ + ì¹´í…Œê³ ë¦¬) -->
    <select id="searchProductName" resultMap="ProductNameMap">
        SELECT * FROM product_name
        WHERE 1=1
        <!-- ðŸ” ì´ë¦„ì´ ìžˆì„ ê²½ìš° ë¶€ë¶„ ì¼ì¹˜ ê²€ìƒ‰ -->
        <if test="productName != null and productName != ''">
            AND product_name LIKE CONCAT('%', #{productName}, '%')
        </if>
        <!-- ðŸ” ì¹´í…Œê³ ë¦¬ ì •í™• ì¼ì¹˜ ê²€ìƒ‰ -->
        <if test="productCategory != null and productCategory != ''">
            AND product_category = #{productCategory}
        </if>
    </select>
</mapper>
