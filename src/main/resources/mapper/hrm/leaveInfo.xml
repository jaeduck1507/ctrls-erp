<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.erp.hrm.mapper.LeaveInfoMapper">

<resultMap type="LeaveInfo" id="LeaveInfoMap">
   <result column="leave_id" property="leaveId"/>
   <result column="leave_type" property="leaveType"/>
   <result column="request_date" property="requestDate"/>
   <result column="start_date" property="startDate"/>
   <result column="end_date" property="endDate"/>
   <result column="reason" property="reason"/>
   <result column="status" property="status" />
</resultMap>

<select id="leaveInfo" parameterType="LeaveInfo" resultMap="LeaveInfoMap">
SELECT
leave_id,
leave_type,
request_date,
start_date,
end_date,
reason,
status
FROM leave_request
<where>
		<if test="empNo != null" >
			emp_no = #{empNo}
		</if>
 </where>
ORDER BY request_date DESC
</select>

<insert id="leaveAdd" parameterType="ArrayList">
INSERT INTO leave_request(emp_no, request_date, leave_type, start_date, end_date, reason) 
VALUES 
<foreach collection="liList" item="leave" separator=",">
		   (#{leave.empNo}, #{leave.requestDate},#{leave.leaveType},#{leave.startDate},#{leave.endDate},#{leave.reason})
</foreach>
</insert>


</mapper>